!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){var i=e(1),r=function(t){return new i(t)};r.install=function(t){t.implement({rwatch:function(){return r(this)}})},window.rwatch=r,t.exports=r},function(t,n,e){function i(t){this.context=t,this.depTree={},this.nodesMap={},this.root=null,this.currentConnector=0,this.connectorName="_medium_"}var r=e(2),o=r.findInTree,a=r.throttle,s=(r.typeOf,e(3)),l=e(5),p=e(6);i.prototype.judgeMapType=function(t,n,e,i,r){t instanceof Array&&"string"==typeof n?this.multiToSingle(t,n,e,i,r):n instanceof Array&&"string"==typeof t?this.singleToMulti(t,n,e,i,r):"string"==typeof t&&"string"==typeof n&&this.singleToSingle(t,n,e,i,r)},i.prototype.wrapAsync=function(t,n,e,i,r){var o=function(t){i.$update(n,t)};r.call(i,t,e,o)},i.prototype.singleToSingle=function(t,n,e,i,r){var o=this.context,s=this;this.recordNodesMap({source:t,target:n}),o.$watch(t,a(function(t,a){var l=o.$get(n);if(i)s.wrapAsync(t,n,l,o,e);else{var p=e.call(o,t,l);o.$update(n,p),r.tapable.applyPluginsWaterfall("then",p,{newValue:t,oldValue:a})}}))},i.prototype.multiToSingle=function(t,n,e,i,r){var o=this.context,s=this,l=this.currentConnector++,p=this.connectorName+l,u=t.map(function(t){s.buildDep(t,n),s.recordNodesMap({source:t,target:p+""});var e=o.$get(t),i={};return"object"!=typeof e&&s.addPrimitiveWatcher(t,i),Object.assign(i,{name:t,value:e})});s.recordNodesMap({source:p,target:n}),setTimeout(function(){s.attrsFilter(u).forEach(function(t){var l=u[t.index];o.$watch(l.name,a(function(t,a){l.value=t;var p=u.map(function(t){return t.value}),c=o.$get(n);if(i)s.wrapAsync(p,target,c,o,e);else{var h=e.call(o,p,c);o.$update(n,h),r.tapable.applyPluginsWaterfall("then",h,{newValue:t,oldValue:a})}}))})},0)},i.prototype.singleToMulti=function(t,n,e,i,r){var o=this.context,s=this;n.forEach(function(n){s.buildDep(t,n),s.recordNodesMap({source:t,target:n})}),o.$watch(t,a(function(t,a){var l=[];n.forEach(function(n,r){var a=o.$get(n);if(i)s.wrapAsync(t,n,a,o,e[r]);else{var p;p=e instanceof Function?e.call(o,t,a):e[r].call(o,t,a),o.$update(n,p),l.push(p)}}),r.tapable.applyPluginsWaterfall("then",l,{newValue:t,oldValue:a})}))},i.prototype.addPrimitiveWatcher=function(t,n){this.context.$watch(t,function(t){n.value=t})},i.prototype.watch=function(t,n,e){if(t.length){var i=new s;return this.judgeMapType(t,n,e,!1,i),i}},i.prototype.asyncWatch=function(t,n,e){t.length&&this.judgeMapType(t,n,e,!0)},i.prototype.buildDep=function(t,n){var e=this.depTree,i=o(e,t,[]);i?i[n]={}:(e[t]={},e[t][n]={})},i.prototype.attrsFilter=function(t){for(var n=this.depTree,e={},i=t.length-1;i>=0;i--)for(var r=t[i].name,a=i-1;a>=0;a--){var s=t[a].name,l=o(n,r,null,!0),p=o(l,s,null,!0);p?e[r]=!0:(l=o(n,s,null,!0),(p=o(l,r,null,!0))&&(e[s]=!0))}return t.filter(function(t,n){return t.index=n,!e[t.name]})},i.prototype.recordNodesMap=function(t){var t=t||{},n=this.nodesMap,e=t.source,i=t.target,r=n[e],o=n[i];o||(o=n[i]=new l({attrName:i})),r||(r=n[e]=new l({attrName:e})),r.setTarget(o),o.setSource(r)},i.prototype.displayRelationGraph=function(){var t=r.findMapRoots(this.nodesMap),n=n||{},e=n.container,i=n.containerWraper;new p({roots:t,container:e,containerWraper:i,nodesMap:this.nodesMap}).build()},t.exports=i},function(t,n){var e={},i=Object.prototype.toString;e.throttle=function(t){var n;return function(){var e=arguments;n&&clearTimeout(n),n=setTimeout(function(){e=[].slice.call(e,0),t.apply(this,e)},0)}},e.resolvePath=function(t,n,e){var i=t.split(".");if("set"===e){var r=i[i.length-1];i=i.slice(0,-1)}var o=function(t,n,e){return e===i.length?n:o(i[e+1],n[t],e+1)};return"set"===e?{name:r,value:o(i[0],n,0)}:o(i[0],n,0)},e.findInTree=function(t,n,i){if(t[n])return t[n];for(var r in t){var o=e.findInTree(t[r],n,i);if(o)return o}},e.typeOf=function(t){return"object"!=typeof t?typeof t:i.call(t).slice(8,-1)},e.findMapRoots=function(t){var n=[];for(var e in t){var i=t[e];0===i.sources.length&&n.push(i)}return n},t.exports=e},function(t,n,e){function i(){this.tapable=new r}var r=e(4);i.prototype.then=function(t){this.tapable.plugin("then",t)},t.exports=i},function(t,n){function e(t){"use strict";if(void 0===this||null===this)throw new TypeError;var n=Object(this),e=n.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<e;o++)if(o in n){var a=n[o];t.call(r,a,o,n)&&i.push(a)}return i}function i(){this._plugins={}}function r(t,n){for(var e in t)n[e]=t[e];return n}t.exports=i,i.mixin=function(t){r(i.prototype,t)},i.prototype.applyPlugins=function(t){if(this._plugins[t])for(var n=Array.prototype.slice.call(arguments,1),e=this._plugins[t],i=0;i<e.length;i++)e[i].apply(this,n)},i.prototype.applyPlugins0=function(t){var n=this._plugins[t];if(n)for(var e=0;e<n.length;e++)n[e].call(this)},i.prototype.applyPlugins1=function(t,n){var e=this._plugins[t];if(e)for(var i=0;i<e.length;i++)e[i].call(this,n)},i.prototype.applyPlugins2=function(t,n,e){var i=this._plugins[t];if(i)for(var r=0;r<i.length;r++)i[r].call(this,n,e)},i.prototype.applyPluginsWaterfall=function(t,n){if(!this._plugins[t])return n;for(var e=Array.prototype.slice.call(arguments,1),i=this._plugins[t],r=n,o=0;o<i.length;o++)e[0]=r,r=i[o].apply(this,e);return r},i.prototype.applyPluginsWaterfall0=function(t,n){var e=this._plugins[t];if(!e)return n;for(var i=n,r=0;r<e.length;r++)i=e[r].call(this,i);return i},i.prototype.applyPluginsWaterfall1=function(t,n,e){var i=this._plugins[t];if(!i)return n;for(var r=n,o=0;o<i.length;o++)r=i[o].call(this,r,e);return r},i.prototype.applyPluginsWaterfall2=function(t,n,e,i){var r=this._plugins[t];if(!r)return n;for(var o=n,a=0;a<r.length;a++)o=r[a].call(this,o,e,i);return o},i.prototype.applyPluginsBailResult=function(t){if(this._plugins[t])for(var n=Array.prototype.slice.call(arguments,1),e=this._plugins[t],i=0;i<e.length;i++){var r=e[i].apply(this,n);if(void 0!==r)return r}},i.prototype.applyPluginsBailResult1=function(t,n){if(this._plugins[t])for(var e=this._plugins[t],i=0;i<e.length;i++){var r=e[i].call(this,n);if(void 0!==r)return r}},i.prototype.applyPluginsBailResult2=function(t,n,e){if(this._plugins[t])for(var i=this._plugins[t],r=0;r<i.length;r++){var o=i[r].call(this,n,e);if(void 0!==o)return o}},i.prototype.applyPluginsBailResult3=function(t,n,e,i){if(this._plugins[t])for(var r=this._plugins[t],o=0;o<r.length;o++){var a=r[o].call(this,n,e,i);if(void 0!==a)return a}},i.prototype.applyPluginsBailResult4=function(t,n,e,i,r){if(this._plugins[t])for(var o=this._plugins[t],a=0;a<o.length;a++){var s=o[a].call(this,n,e,i,r);if(void 0!==s)return s}},i.prototype.applyPluginsBailResult5=function(t,n,e,i,r,o){if(this._plugins[t])for(var a=this._plugins[t],s=0;s<a.length;s++){var l=a[s].call(this,n,e,i,r,o);if(void 0!==l)return l}},i.prototype.applyPluginsAsyncSeries=i.prototype.applyPluginsAsync=function(t){var n=Array.prototype.slice.call(arguments,1),e=n.pop(),i=this._plugins[t];if(!i||0===i.length)return e();var o=0,a=this;n.push(r(e,function(t){return t?e(t):++o>=i.length?e():void i[o].apply(a,n)})),i[0].apply(this,n)},i.prototype.applyPluginsAsyncSeries1=function(t,n,e){var i=this._plugins[t];if(!i||0===i.length)return e();var o=0,a=this,s=r(e,function(t){return t?e(t):++o>=i.length?e():void i[o].call(a,n,s)});i[0].call(this,n,s)},i.prototype.applyPluginsAsyncSeriesBailResult=function(t){var n=Array.prototype.slice.call(arguments,1),e=n.pop();if(!this._plugins[t]||0===this._plugins[t].length)return e();var i=this._plugins[t],o=0,a=this;n.push(r(e,function(){return arguments.length>0?e.apply(null,arguments):++o>=i.length?e():void i[o].apply(a,n)})),i[0].apply(this,n)},i.prototype.applyPluginsAsyncSeriesBailResult1=function(t,n,e){var i=this._plugins[t];if(!i||0===i.length)return e();var o=0,a=this,s=r(e,function(t,r){return arguments.length>0?e(t,r):++o>=i.length?e():void i[o].call(a,n,s)});i[0].call(this,n,s)},i.prototype.applyPluginsAsyncWaterfall=function(t,n,e){if(!this._plugins[t]||0===this._plugins[t].length)return e(null,n);var i=this._plugins[t],o=0,a=this,s=r(e,function(t,n){return t?e(t):++o>=i.length?e(null,n):void i[o].call(a,n,s)});i[0].call(this,n,s)},i.prototype.applyPluginsParallel=function(t){var n=Array.prototype.slice.call(arguments,1),e=n.pop();if(!this._plugins[t]||0===this._plugins[t].length)return e();var i=this._plugins[t],o=i.length;n.push(r(e,function(t){if(!(o<0))return t?(o=-1,e(t)):(o--,0===o?e():void 0)}));for(var a=0;a<i.length;a++)if(i[a].apply(this,n),o<0)return},i.prototype.applyPluginsParallelBailResult=function(t){var n=Array.prototype.slice.call(arguments,1),i=n[n.length-1];if(!this._plugins[t]||0===this._plugins[t].length)return i();for(var o,a=this._plugins[t],s=a.length,l=[],p=0;p<a.length;p++)n[n.length-1]=function(t){return r(i,function(){t>=s||(l.push(t),arguments.length>0&&(s=t+1,l=e.call(l,function(n){return n<=t}),o=Array.prototype.slice.call(arguments)),l.length===s&&(i.apply(null,o),s=0))})}(p),a[p].apply(this,n)},i.prototype.applyPluginsParallelBailResult1=function(t,n,i){var o=this._plugins[t];if(!o||0===o.length)return i();for(var a,s=o.length,l=[],p=0;p<o.length;p++){var u=function(t){return r(i,function(){t>=s||(l.push(t),arguments.length>0&&(s=t+1,l=e.call(l,function(n){return n<=t}),a=Array.prototype.slice.call(arguments)),l.length===s&&(i.apply(null,a),s=0))})}(p);o[p].call(this,n,u)}},i.prototype.hasPlugins=function(t){var n=this._plugins[t];return n&&n.length>0},i.prototype.plugin=function(t,n){if(Array.isArray(t))return void t.forEach(function(t){this.plugin(t,n)},this);this._plugins[t]?this._plugins[t].push(n):this._plugins[t]=[n]},i.prototype.apply=function(){for(var t=0;t<arguments.length;t++)arguments[t].apply(this)}},function(t,n){function e(t){this.option=t||{},this.targets=[],this.sources=[],t.target&&this.targets.push(t.target),t.source&&this.sources.push(t.source),this.attrName=t.attrName}e.prototype.setTarget=function(t){t&&-1===this.targets.indexOf(t)&&this.targets.push(t)},e.prototype.setSource=function(t){t&&-1===this.sources.indexOf(t)&&this.sources.push(t)},e.prototype.getAttrName=function(){return this.attrName},e.prototype.getTargets=function(){return this.targets},t.exports=e},function(t,n,e){function i(t){this.roots=t.roots,this.symbolSize=t.symbolSize||60,this.symbolGap=t.symbolGap||10,this.formatedData={data:[],links:[]},this.nodesMap=t.nodesMap,this.pointsIndexer={},this.chartOption={},this.container=t.container||document.createElement("div"),this.containerWraper=t.containerWraper||document.getElementsByTagName("body")[0],this.chartTitle=t.chartTitle||""}var r=e(7);i.prototype.build=function(){this._formatData(),this._configChartOptions(),this._createLayout()},i.prototype._createPoint=function(t){var n=t.attrName,e=this.pointsIndexer,i=this.formatedData.data,r=e[n];return r||(e[n]=!0,i.push({name:n,value:n,x:t.x,y:t.y})),r},i.prototype._existPoint=function(t){return this.pointsIndexer[t]},i.prototype._createLink=function(t){var n=this.formatedData.links,e=t.sourceAttrName,i=t.targetAttrName;n.push({source:e,target:i})},i.prototype._formatData=function(t){var n=t&&t.roots||this.roots,e=this,i=this.symbolSize,r=this.symbolGap,o=i+r,a=o,s=o,l=n.map(function(t,n){return 0}),p=function(t,n){var i=t.root,r=i.getTargets();if(0!==r.length){var u=i,c=u.getAttrName();parentX=t.coordinate.x,parentY=t.coordinate.y,e._createPoint({attrName:c,x:parentX,y:parentY}),r.forEach(function(i,r){var u=i.getAttrName(),h=t.coordinate.x+a,f=r*s+t.coordinate.y;l[n]<f&&(l[n]=f),e._createPoint({attrName:u,x:h,y:f})&&(t.coordinate.y-=o),e._createLink({sourceAttrName:c,targetAttrName:u}),p({root:i,coordinate:{x:h,y:f}},n)})}};n.forEach(function(t,n){var e=0;0!==n&&(e=l[n?n-1:0]+s),p({root:t,coordinate:{x:0,y:e}},n)}),this.maxY=l[l.length-1]},i.prototype._configChartOptions=function(t){var n=this.chartOption,e=this.formatedData.data,i=this.formatedData.links,r=this.symbolSize,o=this.chartTitle;Object.assign(n,{title:{text:o},left:0,tooltip:{},toolbox:{feature:{saveAsImage:{name:"关系图",pixelRatio:2}},left:"left"},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"none",symbolSize:r,roam:!0,label:{normal:{show:!0}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{normal:{textStyle:{fontSize:20}}},data:e,links:i,lineStyle:{normal:{width:3,curveness:-.3}}}]})},i.prototype._createLayout=function(){var t=this.containerWraper;this.container;new r({data:{maxY:this.maxY,chartOption:this.chartOption,ChartBuilder:this}}).$inject(t)},i.prototype.genDataWithRoots=function(t){var n=this.nodesMap,e=t&&t.rootNames.map(function(t){return n[t]})||this.roots;this.formatedData={data:[],links:[]},this.pointsIndexer={},this._formatData({roots:e}),this._configChartOptions()},t.exports=i},function(t,n,e){var i=e(8),r=Regular.extend({template:i,config:function(t){this.data=Object.assign({isOpen:!1},t)},init:function(){this.isOpen&&this.setChartWraperStyle()},setChartWraperStyle:function(){var t=this.$refs.chartWraper,n=this.data.maxY,e=n/window.innerHeight;Object.assign(t.style,{width:"100%",height:100*e*2+"%"})},onOpen:function(t){this.data.isOpen=!0,setTimeout(function(){this.setChartWraperStyle()}.bind(this),0)},onClose:function(t){this.data.isOpen=!1},onLoad:function(){var t=this.$refs.chartWraper;this.data.chart=window.echarts.init(t),this.data.chart.setOption(this.data.chartOption)},onQuery:function(){this.data.ChartBuilder.genDataWithRoots({rootNames:[this.data.rootAttrName]}),this.data.chart.setOption(this.data.chartOption)},onReset:function(){this.data.ChartBuilder.genDataWithRoots(),this.data.chart.setOption(this.data.chartOption)}});t.exports=r},function(t,n){t.exports='{#if !isOpen}\r\n<a \r\n    ref="test"\r\n    style="position: fixed; display: block; width: 50px; height: 50px; border-radius: 50%; bottom: 50px; right: 50px; text-align: center; line-height: 50px; border: 1px solid #54a8f7;"\r\n    on-click={this.onOpen($event)}\r\n>关系图</a>\r\n{#else}\r\n<div class="rwatch-relGraph" style="position: fixed; width: 100%; height: 100%; overflow-y: auto; background: rgba(0, 0, 0, 0.8); top: 0;">\r\n    <a\r\n        style="position: absolute; right: 0; top: 0; padding: 10px; color: white; z-index: 1;"\r\n        on-click={this.onClose($event)}>关闭</a>\r\n    <div style="position: fixed; top: 0; padding: 20px; color: white; z-index: 9999;">\r\n        输入根属性名称：<input type="text" r-model={rootAttrName}/>\r\n        <button on-click={this.onQuery($event)}>查询</button>\r\n        <button on-click={this.onReset($event)}>重置</button>\r\n    </div>\r\n    <div ref="chartWraper"></div>\r\n</div>\r\n<script src="https://cdn.bootcss.com/echarts/3.8.5/echarts.min.js" on-load={this.onLoad($event)}><\/script>\r\n{/if}\r\n'}]);